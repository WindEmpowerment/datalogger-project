/*
 * RTCatmega1284p.cpp
 *
 *  Created on: 22 mars 2017
 *      Author: gilou
 */

#include <avr/io.h>
#include "RTCatmega1284p.h"

RTC_atmega1284p::RTC_atmega1284p():second(0),minute(0),hour(0),date(0),month(0),year(0),timestamp(0) {
	// TODO Auto-generated constructor stub

}

RTC_atmega1284p::~RTC_atmega1284p() {
	// TODO Auto-generated destructor stub
}

void RTC_atmega1284p::init(){
	TIMSK2 |= _BV(TOIE2);				// enable overflow interrupt
	TCNT2 = 0;
	TCCR2B|= _BV(CS22) | _BV(CS20); // prescaler for overload interrupt each 1 second : CS2[2:0]=101;
	ASSR |= _BV(AS2);					// Set the bit AS2 in the ASSR register to clock the timer 2 from the external crystal
}

ISR(T)
